# Lead Distribution CRM

–ú–∏–Ω–∏-CRM —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ª–∏–¥–æ–≤ –º–µ–∂–¥—É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ —Å —É—á–µ—Ç–æ–º –≤–µ—Å–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –∏ –∏—Ö —Ç–µ–∫—É—â–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```docker-compose up --build```

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
```docker-compose up -d```

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```docker-compose down```

–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é: [http://localhost:8000](http://localhost:8000)
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OpenAPI [http://localhost:8000/docs](http://localhost:8000/docs)


## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
Operator - –æ–ø–µ—Ä–∞—Ç–æ—Ä

id, name, is_active, max_load

–°–≤—è–∑–∏: Lead (one-to-many), OperatorCompetence (one-to-many)

Source - –∏—Å—Ç–æ—á–Ω–∏–∫/–±–æ—Ç

id, name

–°–≤—è–∑–∏: OperatorCompetence (one-to-many), Contact (one-to-many)

Lead - –ª–∏–¥ (–∫–ª–∏–µ–Ω—Ç)

id, external_id, phone, email, operator_id

–°–≤—è–∑–∏: Contact (one-to-many), Operator (many-to-one)

Contact - –æ–±—Ä–∞—â–µ–Ω–∏–µ/–∫–æ–Ω—Ç–∞–∫—Ç

id, lead_id, source_id, operator_id, created_at, message

–°–≤—è–∑—ã–≤–∞–µ—Ç Lead, Source –∏ Operator

OperatorCompetence - –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

id, operator_id, source_id, weight

–°–≤—è–∑—ã–≤–∞–µ—Ç Operator –∏ Source —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤–µ—Å–∞

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏–¥–æ–≤
–õ–∏–¥—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:

external_id - –≤–Ω–µ—à–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

phone - —Ç–µ–ª–µ—Ñ–æ–Ω

email - email

–ï—Å–ª–∏ –ª–∏–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω - —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π.

–í—ã–±–æ—Ä –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤:

–û–ø–µ—Ä–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–µ–Ω (is_active = True)

–¢–µ–∫—É—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ < –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π (current_load < max_load)

–ù–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ —Å –≤–µ—Å–æ–º > 0

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤–µ—Å–∞–º:

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π –≤—ã–±–æ—Ä —Å —É—á–µ—Ç–æ–º –≤–µ—Å–æ–≤

–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å = –≤–µ—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ / —Å—É–º–º–∞ –≤–µ—Å–æ–≤

–£—á–µ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏
–ù–∞–≥—Ä—É–∑–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π (Contact)

–ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ max_load –æ–ø–µ—Ä–∞—Ç–æ—Ä –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

–ù–∞–≥—Ä—É–∑–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases
–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ - –æ–±—Ä–∞—â–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

–ù–µ—Ç –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 400

–î—É–±–ª–∏–∫–∞—Ç—ã –ª–∏–¥–æ–≤ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º